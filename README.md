# Общая информация

## Содержание

%TOC%

## Общий смысл

На основании данных о погоде до момента сева спрогнозировать оптимальное распределение культур с учетом исторических данных. Грубо говоря, для условий, сложившихся на момент посевной какая комбинация культур по полям даст оптимальные результаты, на основании исторических данных этих полей и полей, подходящих к данным условиям (погодным и географическим)

## Продукты

1. Показать оптимальное размещение культур по открытым данным(спутник, ндви)
2. Формировать прямые плановые расходы по оптимальной схеме размещения культур
3. Добавить закрытые данные (работа по подписке, абонентное обслуживание). Для конкретной организации дать возможность дообучать сеть с учетом параметров, собираемых вручную: образование снежной корки, точный уровень снега, точная погода с собственных метеостанции и т.п.

## Схема работы

![](out\mainscheme\Main.png)

* Получить наборы спутниковых и погодных данных (возможно, для не очень большой территории)
* Разбить на обучающую выборку (например предыдущие 20 лет) и контрольную (прошлые два-три года)
* Выделить поля и сформировать набор данных для обучения/анализа
  * Удалить облака
  * Выбрать наиболее контрастный снимок с границами полей (создать с помощью фильтра, преобразования)
  * Определить координаты центра максимального прямоугольника(квадрата) вписанного в границы полей
  * Вычислить для каждого снимка аппроксимированный показатель ндви и видимого цвета
  * Получить погоду для каждого поля на каждом снимке
* Обучить на свободных исторических данных НДВИ со спутников Sentinel и Landsat 1 пиксель 10х10 метров
  * На полях с известным размещением культур научить модель определять культуры, которые росли в этом году на поле
  * Научить искать рекомендуемые к посадке культуры по наибольшему ндви с учетом предшественников и погоды до момента посадки
* Провести вычисления для контрольной выборки - сделать прогноз
* Найти поля, которые совпадают с прогнозом и которые расходятся
* Проанализировать расхождение НДВИ - попытаться перевести в экономический эффект (насколько следование рекомендациям улучшает показатели)
* Если в ЕРП есть координаты полей - по координатам центра сопоставить с полями в базе
* Сформировать технологические карты в ЕРП для оценки затрат

## Сводка существующих решений

* **Pixel.AI** - продукт дочки роскомоса для анализа использования земель. Что делают:
  * Сервис полностью автоматически формирует наборы информации, которая полезна при инвентаризации угодий, вводе земель в сельскохозяйственный оборот, оценке земель, принятии решений о кредитовании, субсидировании, страховании и мониторинге залоговых сельхозактивов.
  * Классификация сельхозугодий:Распахивается, Зарастает, Засевается, Залежь. Земли, которые регулярно обрабатываются, имеют ряд характерных визуальных и спектральных признаков. Алгоритм находит их и сопоставляет, показывая таким образом, какие земли и как используются.
  * Динамика развития посевов:Границы полей; Индекс NDVI; Многолетний анализ; Индекс EVI. Анализ серии космических снимков позволяет собирать статистику о состоянии растительности. Эти данные полезны при сравнении развития посевов на разных полях, или на одном поле от года к году. Накопление статистики помогает прогнозировать урожайность, отбирать более плодородные угодья, выявлять проблемные зоны и планировать полевые работы
  * АО «ТЕРРА ТЕХ», компания холдинга «Российские космические системы» (РКС, входит в Госкорпорацию «Роскосмос») объявила 16 ноября 2022 года о выходе обновления автоматической платформы интерпретации спутниковых снимков Pixel.AI. Бесплатное бета-тестирование платформы стартовало в июле 2022 года. За прошедшие месяцы более 5000 пользователей разместили заказы. Общая площадь проанализированных сельхозугодий превысила 760 тысяч га. География заказов обширна и охватывает не только традиционные сельскохозяйственные регионы, но и зоны более рискованного земледелия. Обратная связь с пользователями помогла разработчикам определить первоочередные направления дальнейшего развития системы.
  * Чтобы отследить состояние территории, пользователю нужно совершить три действия – выбрать область интереса, диапазон дат и отправить заказ в работу. Умный алгоритм самостоятельно отберет данные дистанционного зондирования Земли (ДЗЗ), определит границы полей, категории их использования, сформирует готовый отчет для выгрузки. Отмечается, что объективные данные, полученные в результате автоматической обработки космических снимков, полезны при выборе и инвентаризации сельхозугодий, вводе земель в эксплуатацию, оценке земельных участков, осуществлении контроля над используемыми территориями, а также при принятии решения о кредитовании, субсидировании и страховании предприятий, мониторинге залоговых угодий.
  * Платформа для получения данных и их последующего анализа. Можно использовать в качестве материала для обучения
  * Ссылки:
    * https://pixel-ai.terratech.ru/
    * https://habr.com/ru/news/676380/
* OneSoil - продают(продавали) анализ полей по НДВИ. Что делают:
  * Распознавание культур и границ полей в текущем сезоне. На 8 месяцев раньше официальной статистики — USDA и Евростата.
  * Границы полей для 59 стран. Информация о культурах всего Северного полушария, Южной Америки, Южной Африки и Австралии.
  * Мы с высокой точностью определяем границы полей, создаём карты культур и строим зоны продуктивности. Для этого мы анализируем спутниковые снимки с помощью собственных моделей машинного обучения. С 2017 года мы тренируем алгоритмы на уникальных реальных данных.
  * Привлекли 5-7 млн долларов венчурных денег
  * Заточены под точное земледелие: где твои поля; что на них растет; сколько и когда вносить, чтобы получить оптимальный результат
  * Ссылки
    * https://www.forbes.ru/newsroom/karera-i-svoy-biznes/425151-agroteh-startap-onesoil-s-belorusskimi-kornyami-privlek-5-mln
    * https://ru.wikipedia.org/wiki/OneSoil
* exactfarming.com - платформа, позволяющая участникам эффективно управлять агробизнесом, своевременно принимать решения и снижать риски
  * Создавайте цифровые карты полей, используйте скаутинг как с мобильного приложения, так и с использованием дронов, формируйте карты предписаний для дифференцированного внесения удобрений в несколько кликов, используйте модуль для агрохимического анализа почвы, применяйте все возможности спутникового мониторинга для более эффективного управления растениеводством
  * Спланируйте сезон и оперативные полевые работы с учетом погодной информации
  * Маркетплейс «Поле.рф» по итогам 2022 года выручил 2,66 млн рублей против 1,02 млн рублей годом ранее (рост в 2,6 раза) и зафиксировало чистый убыток в размере 294,7 млн рублей, что превосходит денежные потери годичной давности (214,8 млн рублей). Такие данные компания, входящая в группу «Деметра-Холдинг», раскрыла в начале мая 2023 года. Об этом сообщает «Интерфакс» со ссылкой на материалы ООО «Поле». «Поле.рф» – транзакционный маркетплейс полного цикла, где в режиме одного окна фермеру доступны такие сервисы, как продажа урожая, покупка любых сельскохозяйственных товаров (семена, удобрения, средства защиты растений, техника и запчасти), получение финансирования на любые нужды, доступ к отраслевой аналитике и другие агросервисы. Взаимодействие между фермером и партнером происходит полностью в онлайн-режиме.
  * Ссылки:
    * https://xn--e1alid.xn--p1ai/agroservices/poleexpert
* Как считать НДВИ https://gis-lab.info/qa/ndvi.html  

## Прочее

* sentinel grid map - название участков поверхности как они нумеруются в спутниковой БД
* https://habr.com/ru/articles/452284/ - перевод статьи "Land Cover Classification with eo-learn: Part 1"
  * Выполнение указанного конвейера занимает примерно 140 секунд для одного фрагмента, что в сумме даёт ~12 часов при запуске процесса по всей AOI. Большую часть этого времени занимает скачивание спутниковых данных. Среднестатистический несжатый фрагмент с описанной конфигурацией занимает примерно 3 ГБ, что в сумме даёт ~1ТБ места для всей AOI. (Площадь Словении)
* https://habr.com/ru/articles/501188/ - Как обрабатывать спутниковые снимки с помощью Sen2Cor
  * https://developers.google.com/earth-engine/datasets/catalog/COPERNICUS_S2_SR - Sentinel-2 MSI: MultiSpectral Instrument, Level-2A. Как указано — все снимки с весны 2017 доступны. Сравните с «Sentinel-2B is a European optical imaging satellite that was launched on 7 March 2017.» Спутник Sentinel 2A с лета 2015 летает, то есть примерно полтора года архива по нему не обработаны. В любом случае, для существенно большей истории наблюдений смотрите Landsat 8 или предыдущие — по ним тоже есть датасеты TOA и SR.
* https://habr.com/ru/articles/505578/ - Общедоступные данные дистанционного зондирования Земли: как получить и использовать
  * https://topex.ucsd.edu/gmtsar/ - An InSAR processing system based on GMT
  * https://pypi.org/project/sentinelsat/ - Для получения оптических и радарных снимков со спутников Sentinel-1 и Sentinel-2 удобна Python библиотека SentinelSat
  * https://pypi.org/project/elevation/ - для скачивания рельефа SRTM 30м и 90м
* https://mapinfo.ru/articles/Download-Landsat-8-Data - Как загрузить данные Landsat 8
* https://github.com/makeyourownneuralnetwork/makeyourownneuralnetwork - Построй свою нейронную сеть
* https://github.com/oobabooga/text-generation-webui - A Gradio web UI for Large Language Models. Supports transformers, GPTQ, AWQ, EXL2, llama.cpp (GGUF), Llama models.
* https://github.com/LykosAI/StabilityMatrix - Multi-Platform Package Manager for Stable Diffusion
* https://huggingface.co/TheBloke/zephyr-7B-alpha-GPTQ - квантизованная модель для запуска локалько. Через Oobadoo
* https://python.langchain.com/docs/get_started/introduction - LangChain is a framework for developing applications powered by language models. It enables applications that:
* https://www.youtube.com/watch?v=0gPh18vRghQ - Scrape any website with OpenAI Functions & LangChain
* https://huggingface.co/TheBloke
* https://www.youtube.com/watch?v=dXxQ0LR-3Hg - Chat with Multiple PDFs | LangChain App Tutorial in Python (Free LLMs and Embeddings)
* gdal_merge.py - Mosaics a set of images https://gdal.org/programs/gdal_merge.html
